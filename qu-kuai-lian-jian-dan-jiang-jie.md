####本文整理自网络回答,并加一个人补充

#### 首先，区块链的主要作用是储存信息。任何需要保存的信息，都可以写入区块链，也可以从里面读取，所以它是数据库。

#### 其次，任何人都可以架设服务器，加入区块链网络，成为一个节点。区块链的世界里面，没有中心节点，每个节点都是平等的，都保存着整个数据库。你可以向任何一个节点，写入/读取数据，因为所有节点最后都会同步，保证区块链一致。
#### 本质:
- **区块链本质上是一个去中心化的分布式账本数据库(其本身是一串使用密码学相关联所产生的数据块，每一个数据块中包含了多次比特币网络交易有效确认的信息。),你也可以理解成为一个密码学的巧妙应用.**


####应有的特质:
- 使用了具有 "哈希链" (下文有解释) 形式的数据结构保存基础数据
- 有多个结点参与系统运行（分布式）
- 通过一定的协议或算法对于基础数据的一致性达成共识（共识协议/算法）。

    #####如何实现不可修改:
        - **先修知识:**
            - 密码学Hash()函数的单向性：  Hash(x) =y ， 通过y很难找到x 
            <br>    
            什么是哈希函数:[ _哈希函数_](http://blog.csdn.net/shaoqunliu/article/details/52078869)
            - 哈希链： 假如现在有顺序产生的数据块 A, B , C 。 那么我们可以这样计算一个hash 。 注意 “||” 表示拼接

        
                        
```
        h0=  Hash(A) 
        h1 = Hash(B || h0)
        h2 = Hash(C || h1)
```
        
  - **h2是我们计算的hash头部，现在来看， 为什么我们管这个东西叫Hash链， 因为h2 的值依赖于之前一系列数据的内容和计算顺序。 假如说现在你知道了h2 ， 别人拿着A，B， C， 他不管是修改A，B, C的任一点内容还是A，B， C的出现顺序，你都无法再次计算出正确的h2**
  
 - **到这里区块链的概念就有点感觉了。"区块链"这个词是英文 Block Chain 的翻译， 如果从字面上理解， "数据块组成的链条" 就足以阐释它的基本内涵了。比特币区块链其实就是哈希链的一个变种(注意， 下文描述的这种添加随机数以及对随机数有特殊要求的规则是比特币为了实现工作量证明 Proof of Work 的共识机制而添加的， 并不是区块链的一个必要特征)。 怎么变？ 添加一个随机数（Nonce）**
    - 假如现在有顺序产生的数据块 A, B , C 。 我们来这样计算hash头。 注意 “||” 表示拼接
    
    ```
    h0=  Hash(A|| Nonce0) 
    h1 = Hash(B || h0 || Nonce1)
    h2 = Hash(C || h1 || Nonce2)
    ```
- **这里我们还添加一个额外的要求， 就是 h0, h1, h2 必须都得是以指定数目的0 bit开头的，例如要求每个哈希值都必须以5个0开头，则h0,h1,h2都应该是这样的形式（00000*****************）**

- **添加了这个要求以后， h0, h1, h2就都不是那么容易计算的了， 因为你不能根据输出的形式来反推输入是什么， 而A， B， C又是给定的， 那只能不断更改Nonce来穷举计算， 然后找到一个可以满足要求的Nonce值 ，使得h0, h1, h2符合要求**

- **到这里大家就知道所谓的矿工是在干什么了， 就是接受广播出来的数据块，然后计算当前最新的哈希链的头部， 当成功计算出了一个符合要求的Hash后， 就告诉所有人，自己找到了， 让别人再去计算下一个哈希头部。**

- **其实到这里， 区块链的本质就已经差不多了， 假如网络中大家都默认遵守协议， 只在最长的哈希链后计算新的头部，那么一切都很好， 但是如果有人想搞不一样，那他就得拥有更强的计算能力， 在诚实者都遵守规则的情况下， 自己能够计算出一个链条分叉甚至说直接计算出一个新的链条，让大家都承认**

- **至于这个难度的证明，中本聪就是建立了一个泊松分布的概率模型， 假设了诚实结点计算出新的哈希头的概率p和不诚实结点计算出新的Hash头的概率q后，算出了一个N值.**
    - 这个N值的含义是给出了当一个新的哈希头部 h1 计算出来后，其后追加N个头部（h2,h3,h4....）后，网络才应该承认这个新的头部 h1. 因为此时， 攻击者要想成功发动攻击， 至少需要计算出一个长度大于N的分支, 这个概率在攻击者没有掌握全网算力50%的时候是很难达到的


#### 解决的问题:
- **信任问题:**
    - **区块链提供了一种方案， 让一个网络中，所有的结点都有能力去用计算能力投票， 从而保证了得到承认的结果是大多数人公认的结果， 不会因为少数结点作恶，而修改结果**
    - **传统的交易建立在什么基础上， 我们对于金融机构的信任， 对于中央银行的信任， 或者对于交易对手的信任， 对于第三方中间人的信任。 **
    - **这里其实就引出了很多安全技术应用，或者说很多制度建立的本质， 如果你信任的越多， 需要做的工作就越少。**
    - **区块链就是因为不想信任网络中的任意一个单一结点， 所以让大多数人具有公平的投票权利， 而这个投票权利，不是按人头算的， 是按CPU算的， 每个CPU有一票。**
    
####缺点:
- **效率:**
    - **前面说过， 当你信任的越多， 需要做的工作越少， 就好比你和一个人做生意， 如果你完全信任对方， 那么合同都不用签， 口头约定就行。 如果不太信任， 签一个简单的合同， 规定最重要的事项。  如果特别不信任， 让律师对交易中所有存在风险的地方列出条款，规定责任， 签一个大大的合同。**
    - ** 信任越多， 效率越高。 信任越少， 效率越低。**
    - **区块链也是一样，因为没有单一结点可以信任，通过计算来换取信任。 所以简单的一个承认交易的操作， 需要大量的计算参与进来， 结果是什么， Bitcoin平均交易速度只有7笔每秒。 **
 
- **宏观金融的适应性:**
    - **金融学和经济学作为人类多年来发展出来的科学具有不可替代的地位， 比特币的流通货币量是存在上限且增加速度基本固定的， 这符合经济规律吗？ 显然不符合。 因为学过经济的人都知道， 货币只是对实物财富的衡量， 货币增长速度快于商品增长数量， 则发生通胀， 货币增长速度慢于增长速度则发生通缩。**

- **匿名引发的安全性:**
    - **常被用于洗钱和勒索**
    
- **用户的易用性**
    - **比特币的技术是基于密码学签名技术的， 你的账户安全由你的私钥保护， 如果不添加别的手段，比如在别人那里备份， 或者在别的地方备份， 你丢失了密钥， 账户里的 钱是没有人能给你找回来的。 想想人们丢银行卡， 忘记密码的频率， 这个问题有多大， 不用我说大家也懂**    
    
    
    
    
<br>
<br>

#####区块链由一个个区块（block）组成。区块很像数据库的记录，每次写入数据，就是创建一个区块。

![](/assets/v2-f7b5d64113c5917b9bf1e512a4e764de_hd.jpg)


**每个区块包含两个部分。**
    - **区块头（Head）**：记录当前区块的元信息
    - **区块体（Body）**：实际数据
    
**区块头包含了当前区块的多项元信息。**
    - **生成时间**
    - **实际数据（即区块体）的 Hash**
    - **上一个区块的 Hash**
    - **...**
    
![](/assets/bg2017122704.png)

所谓 Hash 就是计算机可以对任意内容，计算出一个长度相同的特征值。区块链的 Hash 长度是256位，这就是说，不管原始内容是什么，最后都会计算出一个256位的二进制数字。而且可以保证，只要原始内容不同，对应的 Hash 一定是不同的。

举例来说，字符串`123`的 Hash 是`a8fdc205a9f19cc1c7507a60c4f01b13d11d7fd0`（十六进制），转成二进制就是256位，而且只有123能得到这个 Hash。

因此，就有两个重要的推论。

- **推论1**：每个区块的 Hash 都是不一样的，可以通过 Hash 标识区块。
- **推论2**：如果区块的内容变了，它的 Hash 一定会改变。

####区块与 Hash 是一一对应的，每个区块的 Hash 都是针对"区块头"（Head）计算的。

```
Hash = SHA256(区块头)
```
上面就是区块 Hash 的计算公式，Hash 由区块头唯一决定，SHA256是区块链的 Hash 算法。

前面说过，区块头包含很多内容，其中有当前区块体的 Hash（注意是"区块体"的 Hash，而不是整个区块），还有上一个区块的 Hash。这意味着，如果当前区块的内容变了，或者上一个区块的 Hash 变了，一定会引起当前区块的 Hash 改变。

这一点对区块链有重大意义。如果有人修改了一个区块，该区块的 Hash 就变了。为了让后面的区块还能连到它，该人必须同时修改后面所有的区块，否则被改掉的区块就脱离区块链了。由于后面要提到的原因，Hash 的计算很耗时，同时修改多个区块几乎不可能发生，除非有人掌握了全网51%以上的计算能力。

正是通过这种联动机制，区块链保证了自身的可靠性，数据一旦写入，就无法被篡改。这就像历史一样，发生了就是发生了，从此再无法改变。

![](/assets/bg2017122705.png)

每个区块都连着上一个区块，这也是"区块链"这个名字的由来。

####采矿

由于必须保证节点之间的同步，所以新区块的添加速度不能太快。试想一下，你刚刚同步了一个区块，准备基于它生成下一个区块，但这时别的节点又有新区块生成，你不得不放弃做了一半的计算，再次去同步。因为每个区块的后面，只能跟着一个区块，你永远只能在最新区块的后面，生成下一个区块。所以，你别无选择，一听到信号，就必须立刻同步。

所以，区块链的发明者中本聪（这是假名，真实身份至今未知）故意让添加新区块，变得很困难。他的设计是，平均每10分钟，全网才能生成一个新区块，一小时也就六个。

这种产出速度不是通过命令达成的，而是故意设置了海量的计算。也就是说，只有通过极其大量的计算，才能得到当前区块的有效 Hash，从而把新区块添加到区块链。由于计算量太大，所以快不起来。

这个过程就叫做采矿（mining），因为计算有效 Hash 的难度，好比在全世界的沙子里面，找到一粒符合条件的沙子。计算 Hash 的机器就叫做矿机，操作矿机的人就叫做矿工。

####难度系数

读到这里，你可能会有一个疑问，人们都说采矿很难，可是采矿不就是用计算机算出一个 Hash 吗，这正是计算机的强项啊，怎么会变得很难，迟迟算不出来呢？

原来不是任意一个 Hash 都可以，只有满足条件的 Hash 才会被区块链接受。这个条件特别苛刻，使得绝大部分 Hash 都不满足要求，必须重算。

原来，区块头包含一个难度系数（difficulty），这个值决定了计算 Hash 的难度。举例来说，第100000个区块的难度系数是 `14484.16236122`。

![](/assets/bg2017122707.png)

区块链协议规定，使用一个常量除以难度系数，可以得到目标值（target）。显然，难度系数越大，目标值就越小。

![](/assets/bg2017122708.png)

Hash 的有效性跟目标值密切相关，只有小于目标值的 Hash 才是有效的，否则 Hash 无效，必须重算。由于目标值非常小，Hash 小于该值的机会极其渺茫，可能计算10亿次，才算中一次。这就是采矿如此之慢的根本原因。

区块头里面还有一个 Nonce 值，记录了 Hash 重算的次数。第 100000 个区块的 Nonce 值是274148111，即计算了 2.74 亿次，才得到了一个有效的 Hash，该区块才能加入区块链。


####难度系数的动态调节

就算采矿很难，但也没法保证，正好十分钟产出一个区块，有时一分钟就算出来了，有时几个小时可能也没结果。总体来看，随着硬件设备的提升，以及矿机的数量增长，计算速度一定会越来越快。

为了将产出速率恒定在十分钟，中本聪还设计了难度系数的动态调节机制。他规定，难度系数每两周（2016个区块）调整一次。如果这两周里面，区块的平均生成速度是9分钟，就意味着比法定速度快了10%，因此难度系数就要调高10%；如果平均生成速度是11分钟，就意味着比法定速度慢了10%，因此难度系数就要调低10%。

难度系数越调越高（目标值越来越小），导致了采矿越来越难。


####区块链的分叉

即使区块链是可靠的，现在还有一个问题没有解决：如果两个人同时向区块链写入数据，也就是说，同时有两个区块加入，因为它们都连着前一个区块，就形成了分叉。这时应该采纳哪一个区块呢？

![](/assets/bg2017122709.png)

现在的规则是，新节点总是采用最长的那条区块链。如果区块链有分叉，将看哪个分支在分叉点后面，先达到6个新区块（称为"六次确认"）。按照10分钟一个区块计算，一小时就可以确认。

![](/assets/bg2017122710.png)

由于新区块的生成速度由计算能力决定，所以这条规则就是说，拥有大多数计算能力的那条分支，就是正宗的比特链。


####我的想法:

1. 如此高的学习成本能否普及?能普及,大概多久呢?

2. 中心化的资源不可能被再分割,历来财富不均匀到极端必然引起民众反叛推翻政府,从而再次分割财富,但是如果到了区块链时代呢?民众会接受这样的出生即注定吗?

3. 目前区块链的主要应用是虚拟货币,然而大部分的虚拟货币集中在了少部分人手里,这还是以去中心为重点的区块链的发展之路吗?

4. 去中心的区块链和高度中心的国家信用体系是相互补充还是相悖,取决于政府的态度,目前态度暧昧,并无明确反对.

5. 目前仍未有成功的应用落地. btc ,eth,eos,底层应用发展至第三代,并发能力和交易速度已经能满足应用要求,接下来会迎来应用井喷吗?
6. 真的不会有超过全网51%算力的个人或者集团出现吗,如果出现,他们就将是造物主.

